version: 2

sources: 
  - name: coffee_shop
    database: analytics-engineers-club
    tables: 
      - name: orders 
        description: 'this table has additional order information like addresses'
        columns: 
          - name: id 
            data_tests: 
              - unique
              - not_null
          - name: total
            description: this is total order revenue, not by product
            data_tests:
              - not_null
              - greater_than_zero
          - name: zip
            data_tests: 
              - us_zip_code: 
                  config:
                    severity: warn
                    store_failures_as: view
      - name: products 
        description: 'there is more product information in the product_prices table'
        columns: 
          - name: id 
            data_tests: 
              - unique
              - not_null
      - name: order_items
        description: 'this table contains product ids and order ids'
        columns: 
          - name: id 
            description: this column is the primary key, not an order or product id
            data_tests: 
              - unique
              - not_null
      - name: product_prices 
        description: 'this table has product prices by datetime'
        data_tests:
          - dbt_utils.mutually_exclusive_ranges:
              lower_bound_column: created_at
              upper_bound_column: ended_at
              partition_by: product_id
        columns: 
          - name: id 
            data_tests: 
              - unique
              - not_null
      - name: customers 
        description: 'this table has names and emails for customers'
        columns: 
          - name: id 
            data_tests: 
              - unique
              - not_null
  - name: web_tracking
    database: analytics-engineers-club
    tables: 
      - name: pageviews 
        description: 'this table has pageviews from the coffee shop website'
        columns: 
          - name: id 
            data_tests: 
              - unique
              - not_null
  - name: advanced_dbt_examples
    project: analytics-engineers-club
    tables:
      - name: form_events
      - name: favorite_ice_cream_flavors

